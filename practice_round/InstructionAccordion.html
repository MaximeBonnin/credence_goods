<style>
    input {
        display: none;
    }
    
    label {
        display: block;    
        padding: 8px 22px;
        margin: 0 0 1px 0;
        cursor: pointer;
        background: #6a777b;
        border-radius: 3px;
        color: #FFF;
        transition: ease .5s;
    }
    
    label:hover {
        background: #70858b;
    }
    
    .content {
        background: #E2E5F6;
        padding: 10px 25px;
        border: 1px solid #A7A7A7;
        margin: 0 0 1px 0;
        border-radius: 3px;
    }
    
    input + label + .content {
        display: none;
    }
    
    input:checked + label + .content {
        display: block;
    }
    
</style>

<div class="outer-accordion">
    <input type="checkbox" id="outer" />
        <label for="outer">Click here to review instructions</label>
        <div class="content">
            <div class="accordion">
                <input type="checkbox" id="title1" />
                <label for="title1" id="Introduction" hidden>Introduction</label>
                
                <div class="content">
                    {{ include 'practice_round/text_contents/Introduction.html' }}
                </div>

                <input type="checkbox" id="title2" />
                <label for="title2" id="Role" hidden>Role</label>
                
                <div class="content">
                    {{ include 'practice_round/text_contents/Role.html' }}
                </div>

                <input type="checkbox" id="title3" />
                <label for="title3" id="ExperimentalProcedure" hidden>Experimental Procedure</label>
                
                <div class="content">
                    {{ include 'practice_round/text_contents/ExperimentalProcedure.html' }}
                </div>

                <input type="checkbox" id="title4" />
                <label for="title4" id="SettingPrices" hidden>Setting Prices</label>
                
                <div class="content">
                    {{ include 'practice_round/text_contents/SettingPrices.html' }}
                </div>

                <input type="checkbox" id="title5" />
                <label for="title5" id="Diagnosis" hidden>Diagnosis</label>
                
                <div class="content">
                    {{ include 'practice_round/text_contents/Diagnosis.html' }}
                </div>

                <input type="checkbox" id="title6" />
                <label for="title6" id="Payoffs" hidden>Payoffs</label>
                
                <div class="content">
                    {{ include 'practice_round/text_contents/Payoffs.html' }}
                </div>
            </div>        
        </div>
</div>

<script>
    page_sequence = ["Introduction", "Role", "ExperimentalProcedure", "SettingPrices", "Diagnosis", "Payoffs"];
    current_page = "{% participant._current_page_name %}";
    console.log("Current page:", current_page);
    
    if (page_sequence.includes(current_page)) {
        // only display up to current page //
        console.log("Set visible up to {% participant._current_page_name %}")
        for (let i = 0; i <= page_sequence.indexOf("{% participant._current_page_name %}"); i++) {
            document.getElementById(page_sequence[i]).hidden = false;
        }
    } else {
        console.log("Page not in page_sequence. Setting all to visible...")
        for (let i = 0; i < page_sequence.length; i++) {
            document.getElementById(page_sequence[i]).hidden = false;
        }
    };


</script>