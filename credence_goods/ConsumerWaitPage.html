{{ extends 'otree/WaitPage.html' }}
{{ block title }} Waiting for experts... {{ title_text }}{{ endblock }}
{{ block content }}
    {{ body_text }}

    <div class="expert-results">
        {{ if player.is_expert }}
                <table class="table table-striped">
                <thead>
                  <tr>
                    <th class="tg-amwm" colspan="4">Results so far</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th class="tg-0pky">Round</th>
                    <th class="tg-0pky">Number of services provided</th>
                    {% if player.round_number >= C.INVESTMENT_STARTING_ROUND %}
                    <th class="tg-0pky">Investment made</th>
                    {% endif %}
                    <th class="tg-0pky">Total Coins at end of round</th>
                  </tr>
                  {% for p in player.in_all_rounds() %}
                  <tr>
                    <td class="tg-0pky">{% p.round_number %}</td>
                    <td class="tg-0pky">{% p.number_of_services_provided %}</td>
                    {% if player.round_number >= C.INVESTMENT_STARTING_ROUND %}
                    <td class="tg-0pky">{% p.investment_decision %}</td>
                    {% endif %}
                    <td class="tg-0pky">{% p.coins %} coins</td>
                  </tr>
                  {% endfor %}
                </tbody>
                </table>

        {{ endif }}
    </div>

    <div class="consumer-results">
        {{ if not player.is_expert }}
            
                <table class="table table-striped">
                <thead>
                  <tr>
                    <th class="tg-amwm" colspan="3">Results so far</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th class="tg-0pky">Round</th>
                    <th class="tg-0pky">Expert chosen</th>
                    <th class="tg-0pky">Total Coins at end of round</th>
                  </tr>
                  {% for p in player.in_all_rounds() %}
                  <tr>
                    <td class="tg-0pky">{% p.round_number %}</td>
                    <td class="tg-0pky">{% p.field_maybe_none('expert_chosen_name') %}</td>
                    <td class="tg-0pky">{% p.coins %} coins</td>
                  </tr>
                  {% endfor %}
                </tbody>
                </table>

        {{ endif }}
    </div>
{{ endblock }}